{
    "bind_addr": "{{ hostvars[ansible_hostname]['ansible_' + ansible_nic]['ipv4']['address'] }}",
    "bootstrap": {{ consul_bootstrap|lower }},
    "client_addr": "{%- if consul_server|bool == True %}0.0.0.0{% else %}127.0.0.1{% endif %}",
    "data_dir": "/var/lib/consul",
    "datacenter": "BO1",
    "disable_remote_exec": true,
    "disable_update_check": true,
    "enable_debug": false,
    "enable_syslog": true,
    "encrypt": "NUc9TJVGHqBoPG0gj3hcCw==",
    "leave_on_terminate": false,
    "log_level": "INFO",
    "node_name": "{{ ansible_hostname }}",
    "ports": { "dns": 53 },
    "recursors": [ "8.8.8.8", "8.8.4.4" ],
    "rejoin_after_leave": true,
    "retry_interval": "30s",
    "retry_join": [{% for host in groups['consul_server'] %} "{{ hostvars[host]['ansible_' + ansible_nic]['ipv4']['address'] }}" {%- if not loop.last %},{% endif %}{% endfor %} ],
    "server": {{ consul_server|lower }},
    "skip_leave_on_interrupt": true,
    "ui_dir": "/usr/share/consul-ui"
}
